<!-- 
=========================================================
Light Bootstrap Dashboard PRO - v2.0.1
=========================================================

Product Page: https://www.creative-tim.com/product/light-bootstrap-dashboard-pro
Copyright 2019 Creative Tim (https://www.creative-tim.com)

Coded by Creative Tim

=========================================================

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->

<!--
Central Automation v1.6.0
Updated: 1.10.0
Copyright Aaron Scott (WiFi Downunder) 2022
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="assets/img/favicon-16x16.png" sizes="16x16">
	<link rel="icon" type="image/png" href="assets/img/favicon-32x32.png" sizes="32x32">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Central Automation</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/light-bootstrap-dashboard.css?v=2.0.1" rel="stylesheet" />
    <link href="assets/css/central-style.css" rel="stylesheet" />
</head>

<body>
    <div class="wrapper wrapper-full-page">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute">
            <div class="container">
                <div class="navbar-wrapper">
                    <a class="navbar-brand" href="#pablo">Central Automation</a>
                    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse justify-content-end" id="navbar">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a href="hydra-dashboard.html" class="nav-link" id="dashboardLink">
                                <i class="central-icon ca-dashboard"></i>
                            </a>
                        </li>
                        <li class="nav-item">
							<a class="nav-link" onclick="showLog()" href="#">
								<i class="central-icon ca-research"></i>
							</a>
						</li>
                        <li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<i class="nc-icon nc-bullet-list-67"></i>
							</a>
							<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
								<a href="documentation.html" class="dropdown-item">
									<i class="central-icon ca-book-open"></i> Help
								</a>
								<a href="hydra-settings.html" class="dropdown-item">
									<i class="nc-icon nc-settings-gear-64"></i> Settings
								</a>
							</div>
						</li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- End Navbar -->
        <!--   you can change the color of the filter page using: data-color="blue | azure | green | orange | red | purple" -->
        <div class="full-page register-page section-image" data-color="orange" data-image="assets/img/bg4.jpg">
            <div class="content">
                <div class="container">
					<div class="row">
						<div class="col-md-12 mx-auto">
							<div class="card card-register card-plain text-center">
								<div class="card-header ">
									<div class="row  justify-content-center">
										<div class="col-md-12">
											<div class="header-text">
												<h2 class="card-title">Central API Settings</h2>
												<hr />
											</div>
										</div>
									</div>
								</div>
								<div class="card card-body">
									<div class="row">
										<div class="col-md-9 mx-auto"></div>
										<div class="col-md-3 mx-auto">
											<button type="submit" class="btn btn-fill btn-warning btn-wd" onclick="addAccount()">Add New Central Account</button>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12 mx-auto">
											<div class="card-body table-striped table-no-bordered table-hover dataTable dtr-inline table-full-width">
												<div class="fresh-datatables">
													<table id="hydra-table" class="table table-striped table-no-bordered table-hover table-fixed" cellspacing="0" width="100%">
														<thead>
															<th>Name</th>
															<th>Cluster</th>
															<th>Client ID</th>
															<th>Client Secret</th>
															<th>Access Token</th>
															<th>Refresh Token</th>
															<th>Actions</th>
														</thead>
														<tbody>
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6 mx-auto">
							<div class="card card-register card-plain text-center">
								<div class="card-header ">
									<div class="row  justify-content-center">
										<div class="col-md-12">
											<div class="header-text">
												<h2 class="card-title">Naming Conventions</h2>
												<h4 class="card-subtitle">Enter the formats used for renaming</h4>
												<hr />
											</div>
										</div>
									</div>
								</div>
								<div class="card-body ">
									<div class="row">
										<div class="col-md-10 mx-auto">
											<form method="#" action="#">
												<div class="card card-plain">
													<div class="content">
														<form class="form-horizontal">
															<div class="form-group">
																<div class="row">
																	<label class="col-md-6 control-label">Auto AP Naming</label>
																	<div class="col-md-6">
																		<input type="text" placeholder="{{initials}}-{{model}}-{{number}}" class="form-control" id="ap_naming_format">
																	</div>
																</div>
															</div>
															<div class="form-group">
																<div class="row">
																	<label class="col-md-6 control-label">Switch Port Variable</label>
																	<div class="col-md-6">
																		<input type="text" placeholder="int{{number}}_name" class="form-control" id="port_variable_format">
																	</div>
																</div>
															</div>
														</form>
													</div>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-6 mx-auto">
							<div class="card card-register card-plain text-center">
								<div class="card-header ">
									<div class="row  justify-content-center">
										<div class="col-md-12">
											<div class="header-text">
												<h2 class="card-title">Global Settings</h2>
												<h4 class="card-subtitle">General settings for the site</h4>
												<hr />
											</div>
										</div>
									</div>
								</div>
								<div class="card-body ">
									<div class="col-md-10 mx-auto">
										<form method="#" action="#">
											<div class="card card-plain">
												<div class="content">
													<form class="form-horizontal">
														<div class="form-group">
															<div class="row">
																<label class="col-md-6 control-label">Refresh Interval (minutes)</label>
																<div class="col-md-6">
																	<input type="number" placeholder="30" class="form-control" id="refresh_rate" min="5">
																</div>
															</div>
														</div>
														<div class="form-group">
															<div class="row">
																<label class="col-md-6 control-label">Client Monitoring</label>
																<div class="col-md-6">
																	<select id="load_clients" class="custom-select" data-title="Include" data-style="btn-default btn-outline" data-menu-style="dropdown-orange">
																		<option value="Include">Include</option>
																		<option value="Do Not Include">Do Not Include</option>
                                    								</select>
																</div>
															</div>
														</div>
													</form>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
                    </div>
                    <div class="footer text-center">
						<button type="submit" class="btn btn-fill btn-success btn-wd btn-lg" onclick="onFinishSetup()">Save & Go To Dashboard</button>
					</div>
					</div>
				</div>
			</div>
			<!-- Account Modal -->
			<div class="modal fade modal-small modal-primary" id="AccountModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="row">
							<div class="col-md-1"></div>
							<div class="col-md-10">
								<div class="card-body">
									<form class="form-horizontal">
									<div class="form-group">
										<div class="row">
											<label class="col-md-4">Name</label>
											<div class="col-md-8">
												<input type="text" placeholder="Name" class="form-control" id="account_name">
											</div>
										</div>
									</div>
									<div class="form-group">
										<div class="row">
											<label class="col-md-4">Cluster</label>
											<div class="col-md-8">
												<select id="clusterselector" class="custom-select" data-title="Select a Cluster..." data-style="btn-default btn-outline" data-menu-style="dropdown-orange" onchange="isCOPSelected()">
												</select>
											</div>
										</div>
										<div class="row" id="cop_address_row" hidden>
											<label class="col-md-4">Hostname</label>
											<div class="col-md-8">
												<input type="text" placeholder="COP Hostname" class="form-control" id="cop_address">
											</div>
										</div>
									</div>
									<div class="form-group">
										<div class="row">
											<label class="col-md-4">Central ID</label>
											<div class="col-md-8">
												<input type="text" placeholder="Central ID" class="form-control" id="central_id">
											</div>
										</div>
									</div>
									<div class="form-group">
										<div class="row">
											<label class="col-md-4">Client ID</label>
											<div class="col-md-8">
												<input type="text" placeholder="Client ID" class="form-control" id="client_id">
											</div>
										</div>
									</div>
									<div class="form-group">
										<div class="row">
											<label class="col-md-4">Client Secret</label>
											<div class="col-md-8">
												<input type="text" placeholder="Client Secret" class="form-control" id="client_secret">
											</div>
										</div>
									</div>
									<div class="form-group">
										<div class="row">
											<label class="col-md-4">Access Token</label>
											<div class="col-md-8">
												<input type="text" placeholder="Access Token" class="form-control" id="access_token">
											</div>
										</div>
									</div>
									<div class="form-group">
										<div class="row">
											<label class="col-md-4">Refresh Token</label>
											<div class="col-md-8">
												<input type="text" placeholder="Refresh Token" class="form-control" id="refresh_token">
											</div>
										</div>
									</div>
								</form>
									<br>
									<button type="submit" class="btn btn-fill btn-neutral btn-wd" onclick="cancelAccount()">Cancel</button>
									<button type="submit" class="btn btn-fill btn-warning btn-wd" onclick="testToken()">Save</button>
								</div>
							</div>
						</div>
						
					</div>
				</div>
			</div>
			<!--  End Modal -->
			<!-- Error Log Modal -->
					<div class="modal fade modal-mini modal-primary" id="ErrorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="row">
									<div class="col-md-12">
										<div class="card-header">
												<h4 class="card-title">Log</h4>
											</div>
										<div class="card-body" id="errorBody">
									
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!--  End Modal -->
        </div>
        
        <footer class="footer">
            <div class="container">
           		<a data-toggle="modal" data-target="#ErrorModal" href="#pablo" id="ErrorModalLink"></a>	
            	<a data-toggle="modal" data-target="#AccountModal" href="#pablo" id="AccountModalLink"></a>
                <nav>
                	<ul class="footer-menu" id="api-footer"></ul>
                    <p class="copyright text-center">
                        ©
                        <script>
                            document.write(new Date().getFullYear())
                        </script>
                        <a href="http://www.wifidownunder.com">WiFi Downunder</a>
                    </p>
                </nav>
            </div>
        </footer>
    </div>	
</body>
<!--   Core JS Files   -->
<script src="assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="assets/js/plugins/bootstrap-switch.js"></script>
<!--  Chartist Plugin  -->
<script src="assets/js/plugins/chartist.min.js"></script>
<!--  Notifications Plugin    -->
<script src="assets/js/plugins/bootstrap-notify.js"></script>
<!--  jVector Map  -->
<script src="assets/js/plugins/jquery-jvectormap.js" type="text/javascript"></script>
<!--  Plugin for Date Time Picker and Full Calendar Plugin-->
<script src="assets/js/plugins/moment.min.js"></script>
<!--  DatetimePicker   -->
<script src="assets/js/plugins/bootstrap-datetimepicker.js"></script>
<!--  Sweet Alert  -->
<script src="assets/js/plugins/sweetalert2.all.min.js" type="text/javascript"></script>
<!--  Tags Input  -->
<script src="assets/js/plugins/bootstrap-tagsinput.js" type="text/javascript"></script>
<!--  Sliders  -->
<script src="assets/js/plugins/nouislider.js" type="text/javascript"></script>
<!--  Bootstrap Select  -->
<script src="assets/js/plugins/bootstrap-selectpicker.js" type="text/javascript"></script>
<!--  jQueryValidate  -->
<script src="assets/js/plugins/jquery.validate.min.js" type="text/javascript"></script>
<!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script src="assets/js/plugins/jquery.bootstrap-wizard.js"></script>
<!--  Bootstrap Table Plugin -->
<script src="assets/js/plugins/bootstrap-table.js"></script>
<!--  DataTable Plugin -->
<script src="assets/js/plugins/jquery.dataTables.min.js"></script>
<script src="assets/js/plugins/ellipsis.js"></script>
<!--  Full Calendar   -->
<script src="assets/js/plugins/fullcalendar.min.js"></script>
<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
<script src="assets/js/light-bootstrap-dashboard.js?v=2.0.1" type="text/javascript"></script>
<!-- Light Dashboard DEMO methods, don't include it in your project! -->
<script src="assets/js/demo.js"></script>
<script>
    $(document).ready(function() {
        demo.checkFullPageBackgroundImage();
        
        $('#hydra-table').DataTable({
			"paging": false,
			"searching": false,
			"info": false,
			"autoWidth": false,
			columnDefs: [ {
				targets: [2,3,4,5],
				render: function (data, type, full, meta) {
                        return "<div class='text-wrap width-150'>" + data + "</div>";
                }
            }]
		});
		
		var table = $('#hydra-table').DataTable();

        // Edit Account record
        table.on('click', '.edit', function() {
            $tr = $(this).closest('tr');

            if ($tr.hasClass('child')) {
                $tr = $tr.prev('.parent');
            }

            var data = table.row($tr).data();
            editAccount(data[2]);
            //alert('You press on Row: ' + data[0] + ' ' + data[1] + ' ' + data[2] + '\'s row.');
        });

        // Delete a record
        table.on('click', '.remove', function(e) {
            $tr = $(this).closest('tr');
            var data = table.row($tr).data();
            deleteAccount(data[2]);
        });
        
        if (localStorage.getItem('base_url') && !localStorage.getItem('account_details')) {
			// Old account settings - need to migrate to v1.6
			upgradeAccountSettings();
		}
        
        populateCentralClusters();
		loadAccountDetails();
		
		var apNaming = localStorage.getItem('ap_naming_format');
		if (apNaming != null && apNaming != "undefined") {
			document.getElementById("ap_naming_format").value = apNaming;
		}
		
		var portNaming = localStorage.getItem('port_variable_format');
		if (portNaming != null && portNaming != "undefined") {
			document.getElementById("port_variable_format").value = portNaming;
		}
		
		var refreshRate = localStorage.getItem('refresh_rate');
		if (refreshRate != null && refreshRate != "undefined") {
			document.getElementById("refresh_rate").value = refreshRate;
		}
		
		var loadClients = localStorage.getItem('load_clients');
		if (loadClients === null || loadClients === "") {
			loadClients = true;
		} else {
			loadClients = JSON.parse(loadClients)
		}
		document.getElementById("load_clients").value = loadClients ? "Include" : "Do Not Include";
        
        var reachabilityPromise = new $.Deferred();
        $.when(checkReachability(reachabilityPromise)).then(function () {
			console.log("Using "+getAPIURL());
		});
    });
</script>
<!--   Main JS Files   -->
<script src="assets/js/main.js"></script>
<script src="assets/js/proxy.js"></script>
<script src="assets/js/hydra-main.js"></script>
<script src="assets/js/hydra.js"></script>

</html>